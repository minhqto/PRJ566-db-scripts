# PRJ566 Winter 2021

## Pawsitive

## Group 9

### Group Members:

- Artur Montesano Felix
- Jihyun Lee
- Minh To
- Viet Nguyen

# Scripts for creation, deletion and populating data

## Minh

## 1. Creation

```
    CREATE TABLE BookingStatus(
        status_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        status_name VARCHAR(12) NOT NULL,
        CONSTRAINT status_pk PRIMARY KEY (status_id)
    );

    CREATE TABLE Review(
        review_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        client_id INTEGER NOT NULL,
        specialist_id INTEGER NOT NULL,
        booking_id INTEGER NOT NULL,
        rating INTEGER NOT NULL,
        review_text VARCHAR(1000),
        CONSTRAINT review_pk PRIMARY KEY(review_id),
        CONSTRAINT review_client_fk
            FOREIGN KEY(client_id)
            REFERENCES Users(user_id)
            ON DELETE SET NULL,
        CONSTRAINT review_specialist_fk
            FOREIGN KEY(specialist_id)
            REFERENCES Users(user_id)
            ON DELETE SET NULL,
        CONSTRAINT review_booking_fk
            FOREIGN KEY(booking_id)
            REFERENCES Booking(booking_id)
            ON DELETE SET NULL,
        CONSTRAINT user_id_not_match
            CHECK (client_id <> specialist)
    );

    CREATE TABLE BookingMessage(
        booking_message_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        booking_id INTEGER NOT NULL,
        sender_id INTEGER NOT NULL,
        message VARCHAR(300) NOT NULL,
        time DATETIME NOT NULL,
        CONSTRAINT booking_pk PRIMARY KEY(booking_message_id),
        CONSTRAINT booking_id_fk
            FOREIGN KEY(booking_id)
            REFERENCES booking(booking_id)
            ON DELETE CASCADE,
        CONSTRAINT sender_id_fk
            FOREIGN KEY(sender_id)
            REFERENCES User(user_id)
            ON DELETE CASCADE
    );

    CREATE TABLE SpecialistProfile(
        profile_id INTEGER,
        user_id INTEGER,
        description VARCHAR(255),
        status BOOLEAN,
        radius DOUBLE,
        availability VARCHAR(255),
        CONSTRAINT specialist_pk PRIMARY KEY(profile_id),
        CONSTRAINT user_fk
            FOREIGN KEY(user_id),
            REFERENCES User(user_id)
            ON DELETE CASCADE
    );

```

## 2. Deletion

```
DROP TABLE BookingStatus;
DROP TABLE Review;
DROP TABLE BookingMessage;
DROP TABLE SpecialistProfile;
```

## 3. Population

```

```

## ARTUR

## 1. Creation

```
    CREATE TABLE Dog (
        dog_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        user_id INTEGER NOT NULL,
        dog_name VARCHAR(50) NOT NULL,
        dog_breed VARCHAR(50) NOT NULL,
        dog_weight INTEGER NOT NULL,
        dog_age INTEGER NOT NULL,
        has_bite_history BOOLEAN,
        is_vaccinated BOOLEAN,
        CONSTRAINT dog_pk PRIMARY KEY(dog_id),
        CONSTRAINT dog_user_fk
            FOREIGN KEY (user_id)
            REFERENCES users (user_id)
            ON DELETE CASCADE

    );

    CREATE TABLE Users(
        user_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        address_id INTEGER NOT NULL,
        role_id INTEGER NOT NULL,
        first_name VARCHAR(50) NOT NULL,
        last_name VARCHAR(50) NOT NULL,
        email VARCHAR(255) NOT NULL,
        password VARCHAR(50) NOT NULL,
        CONSTRAINT user_pk PRIMARY KEY (user_id),
        CONSTRAINT address_fk
            FOREIGN KEY (address_id)
            REFERENCES address (address_id)
            ON DELETE SET NULL,
        CONSTRAINT role_fk
            FOREIGN KEY (role_id)
            REFERENCES role (role_id)
            ON DELETE SET NULL
    );

    CREATE TABLE Role (
        role_id INTEGER NOT NULL,
        role_name VARCHAR(50) NOT NULL,
        CONSTRAINT role_pk PRIMARY KEY (role_id)
    );

    CREATE TABLE Address(
        address_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        user_id INTEGER NOT NULL,
        street VARCHAR(30) NOT NULL,
        city VARCHAR(30) NOT NULL,
        province VARCHAR(20) NOT NULL,
        postal_code VARCHAR(7) NOT NULL,
        country VARCHAR(60) NOT NULL,
        CONSTRAINT address_pk PRIMARY KEY (address_id),
        CONSTRAINT address_user_fk
            FOREIGN KEY (user_id)
            REFERENCES users (user_id)
            ON DELETE CASCADE
    );

```

## 2. Deletion

```
DROP TABLE User;
DROP TABLE Dog;
DROP TABLE Address;
DROP TABLE Role;
```

## 3. Population

```

```

## Jihyun

## 1. Creation

```
CREATE TABLE ServiceType (
    service_type_id INTEGER
    service_type_name VARCHAR(30) NOT NULL,
    CONSTRAINT servicetype_pk PRIMARY KEY(service_type_id)
);

CREATE TABLE Service (
    service_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
    service_name VARCHAR(30) NOT NULL,
    service_price INTEGER NOT NULL,
    service_description VARCHAR(300),
    service_type_id INTEGER NOT NULL,
    CONSTRAINT service_fk
        FOREIGN KEY(service_type_id)
        REFERENCES serviceType(service_type_id)
        ON DELETE CASCADE
);

CREATE TABLE Booking (
    booking_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
    client_id INTEGER NOT NULL,
    specialist_id INTEGER NOT NULL,
    service_id INTEGER NOT NULL,
    booking_date DATE NOT NULL,
    booking_time INTEGER NOT NULL,
    status_id INTEGER NOT NULL,
    total_cost INTEGER NOT NULL,
    CONSTRAINT booking_client_fk
        FOREIGN KEY(client_id)
        REFERENCES User(user_id)
        ON DELETE SET NULL,
    CONSTRAINT specialist_id
        FOREIGN KEY(specialist_id)
        REFERENCES User(user_id)
        ON DELETE SET NULL,
    CONSTRAINT client_not_equal_specialist CHECK (client_id <> specialist_id)
);
```

## 2. Deletion

```
DROP TABLE Service;
DROP TABLE ServiceType;
## should locate before Client & Specialist
DROP TABLE Booking;
```

## 3. Population
