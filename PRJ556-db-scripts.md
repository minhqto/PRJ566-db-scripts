# PRJ566 Winter 2021

## Pawsitive

## Group 9

### Group Members:

- Artur Montesano Felix
- Jihyun Lee
- Minh To
- Viet Nguyen

# Scripts for creation, deletion and populating data

ERD: Viet & Minh

Tables:
Artur

- dog (this tables requires a function to return the role ID from the user table. This is used for a CHECK constraint in the dog table to ensure that only users a client roleID can add a dog)
- user
- role
- address

Jihyun

- service (this table needs to check that the user ID's role ID is a valid specialist role ID)
- serviceType
- booking

Minh

- bookingStatus
- Review (This table needs to check that the client ID and the specialist ID do not match, and check that the roleID of client is valid, and check that roleID of specialist is valid)
- BookingMessage

## Creation - Minh

```


```

## ARTUR
## 1. Creation

```
    CREATE TABLE dog (
        dog_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        user_id INTEGER NOT NULL,
        dog_name VARCHAR(255) NOT NULL,
        dog_breed VARCHAR(255) NOT NULL,
        dog_weight INTEGER NOT NULL,
        dog_age INTEGER NOT NULL,
        has_bite_history BOOLEAN,
        is_vaccinated BOOLEAN,
        CONSTRAINT dog_pk PRIMARY KEY(dog_id),
        CONSTRAINT dog_user_fk
            FOREIGN KEY (user_id)
            REFERENCES users (user_id)
        ON DELETE CASCADE
    );
    
    CREATE TABLE users(
        user_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        address_id INTEGER NOT NULL,
        role_id INTEGER NOT NULL,
        first_name VARCHAR(255) NOT NULL,
        last_name VARCHAR(255) NOT NULL,
        email VARCHAR(255) NOT NULL,
        CONSTRAINT user_pk PRIMARY KEY (user_id),
        CONSTRAINT address_fk
            FOREIGN KEY (address_id)
            REFERENCES address (address_id),
        CONSTRAINT role_fk
            FOREIGN KEY (role_id)
            REFERENCES role (role_id)
        ON DELETE CASCADE
    );

    CREATE TABLE role (
        role_id INTEGER NOT NULL,
        role_name VARCHAR(255) NOT NULL,
        CONSTRAINT role_pk PRIMARY KEY (role_id)
    );

    CREATE TABLE address(
        address_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        user_id INTEGER NOT NULL,
        street VARCHAR(255) NOT NULL,
        city VARCHAR(255) NOT NULL,
        province VARCHAR(255) NOT NULL,
        postal_code VARCHAR(6) NOT NULL,
        country VARCHAR(255) NOT NULL,
        CONSTRAINT address_pk PRIMARY KEY (address_id),
        CONSTRAINT address_user_fk
            FOREIGN KEY (user_id)
            REFERENCES users (user_id),
        ON DELETE CASCADE
    );

```

## 2. Deletion

```
DROP TABLE role;
DROP TABLE user;
DROP TABLE dog;
DROP TABLE address;
```

## 3. Population

```

```

## 4. Selection

```
SELECT u.role_id
    FROM users u, dog d
    WHERE u.user_id = d.user_id;
```

## Jihyun
## 1. CREATE

## serviceType
```
CREATE TABLE SERVICETYPE (
    service_type_id NUMBER(2),
    service_type_name VARCHAR(30) NOT NULL,
    CONSTRAINT servicetype_pk PRIMARY KEY(service_type_id)
);

CREATE TABLE SERVICE (
    service_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    service_name VARCHAR(30) NOT NULL,
    service_price NUMBER(5, 2) NOT NULL,
    service_description VARCHAR(300),
    service_type_id NUMBER NOT NULL,
    CONSTRAINT service_fk FOREIGN KEY(service_type_id) REFERENCES serviceType(service_type_id) ON DELETE CASCADE
);

CREATE TABLE BOOKING (
    booking_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    client_id NUMBER(5) NOT NULL,
    specialist_id NUMBER(3, 2) NOT NULL,
    booking_date DATE NOT NULL,
    booking_time NUMBER(4) NOT NULL,
    status_id NUMBER(5) NOT NULL,
    total_cost NUMBER(5) NOT NULL,
    CONSTRAINT booking_client_fk FOREIGN KEY(client_id) REFERENCES client(client_id) ON DELETE SET NULL,
    CONSTRAINT specialist_id FOREIGN KEY(specialist_id) REFERENCES specialist(cspecialist_id) ON DELETE SET NULL
);
```

## 2. deletion
```
DROP TABLE SERVICE;
DROP TABLE SERVICETYPE;
## should locate before Client & Specialist
DROP TABLE BOOKING;
```


## 3. Population
