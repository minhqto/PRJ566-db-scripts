# PRJ566 Winter 2021

## Pawsitive

## Group 9

### Group Members:

- Artur Montesano Felix
- Jihyun Lee
- Minh To
- Viet Nguyen

# Scripts for creation, deletion and populating data

ERD: Viet & Minh

Tables:

## Minh

## 1. Creation

```
    CREATE TABLE BookingStatus(
        status_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        status_name VARCHAR(12),
        CONSTRAINT status_pk PRIMARY KEY (status_id)
    );

    CREATE TABLE Review(
        review_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        client_id INTEGER,
        specialist_id INTEGER,
        booking_id INTEGER,
        rating INTEGER,
        review_text VARCHAR(1000),
        CONSTRAINT review_pk PRIMARY KEY(review_id),
        CONSTRAINT review_client_fk
            FOREIGN KEY(client_id)
            REFERENCES Users(user_id)
            ON DELETE SET NULL,
        CONSTRAINT review_specialist_fk
            FOREIGN KEY(specialist_id)
            REFERENCES Users(user_id)
            ON DELETE SET NULL,
        CONSTRAINT review_booking_fk
            FOREIGN KEY(booking_id)
            REFERENCES Booking(booking_id)
            ON DELETE SET NULL,
        CONSTRAINT user_id_not_match
            CHECK (client_id <> specialist)
    );

    CREATE TABLE BookingMessage(
        booking_message_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        booking_id INTEGER,
        sender_id INTEGER,
        message VARCHAR(300),
        time DATETIME,
        CONSTRAINT booking_pk PRIMARY KEY(booking_message_id),
        CONSTRAINT booking_id_fk
            FOREIGN KEY(booking_id)
            REFERENCES booking(booking_id)
            ON DELETE CASCADE,
        CONSTRAINT sender_id_fk
            FOREIGN KEY(sender_id)
            REFERENCES User(user_id)
            ON DELETE CASCADE
    );

```

## ARTUR

## 1. Creation

```
    CREATE TABLE Dog (
        dog_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        user_id INTEGER NOT NULL,
        dog_name VARCHAR(50) NOT NULL,
        dog_breed VARCHAR(50) NOT NULL,
        dog_weight INTEGER NOT NULL,
        dog_age INTEGER NOT NULL,
        has_bite_history BOOLEAN,
        is_vaccinated BOOLEAN,
        CONSTRAINT dog_pk PRIMARY KEY(dog_id),
        CONSTRAINT dog_user_fk
            FOREIGN KEY (user_id)
            REFERENCES users (user_id)
            ON DELETE CASCADE

    );

    CREATE TABLE Users(
        user_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        address_id INTEGER NOT NULL,
        role_id INTEGER NOT NULL,
        first_name VARCHAR(50) NOT NULL,
        last_name VARCHAR(50) NOT NULL,
        email VARCHAR(255) NOT NULL,
        password VARCHAR(50) NOT NULL,
        CONSTRAINT user_pk PRIMARY KEY (user_id),
        CONSTRAINT address_fk
            FOREIGN KEY (address_id)
            REFERENCES address (address_id)
            ON DELETE CASCADE,
        CONSTRAINT role_fk
            FOREIGN KEY (role_id)
            REFERENCES role (role_id)
            ON DELETE CASCADE
    );

    CREATE TABLE Role (
        role_id INTEGER NOT NULL,
        role_name VARCHAR(50) NOT NULL,
        CONSTRAINT role_pk PRIMARY KEY (role_id)
    );

    CREATE TABLE Address(
        address_id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        user_id INTEGER NOT NULL,
        street VARCHAR(30) NOT NULL,
        city VARCHAR(30) NOT NULL,
        province VARCHAR(20) NOT NULL,
        postal_code VARCHAR(7) NOT NULL,
        country VARCHAR(60) NOT NULL,
        CONSTRAINT address_pk PRIMARY KEY (address_id),
        CONSTRAINT address_user_fk
            FOREIGN KEY (user_id)
            REFERENCES users (user_id),
    );

```

## 2. Deletion

```
DROP TABLE Role;
DROP TABLE User;
DROP TABLE Dog;
DROP TABLE Address;
```

## 3. Population

```

```

## 4. Selection

```
SELECT u.role_id
    FROM users u, dog d
    WHERE u.user_id = d.user_id;
```

## Jihyun

## 1. CREATE

## serviceType

```
CREATE TABLE ServiceType (
    service_type_id NUMBER(2),
    service_type_name VARCHAR(30) NOT NULL,
    CONSTRAINT servicetype_pk PRIMARY KEY(service_type_id)
);

CREATE TABLE Service (
    service_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    service_name VARCHAR(30) NOT NULL,
    service_price NUMBER(5, 2) NOT NULL,
    service_description VARCHAR(300),
    service_type_id NUMBER NOT NULL,
    CONSTRAINT service_fk
        FOREIGN KEY(service_type_id)
        REFERENCES serviceType(service_type_id)
        ON DELETE CASCADE
);

CREATE TABLE Booking (
    booking_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    client_id NUMBER(5) NOT NULL,
    specialist_id NUMBER(3, 2) NOT NULL,
    booking_date DATE NOT NULL,
    booking_time NUMBER(4) NOT NULL,
    status_id NUMBER(5) NOT NULL,
    total_cost NUMBER(5) NOT NULL,
    CONSTRAINT booking_client_fk
        FOREIGN KEY(client_id)
        REFERENCES client(client_id)
        ON DELETE SET NULL,
    CONSTRAINT specialist_id
        FOREIGN KEY(specialist_id)
        REFERENCES specialist(cspecialist_id)
        ON DELETE SET NULL
);
```

## 2. deletion

```
DROP TABLE Service;
DROP TABLE ServiceType;
## should locate before Client & Specialist
DROP TABLE Booking;
```

## 3. Population
